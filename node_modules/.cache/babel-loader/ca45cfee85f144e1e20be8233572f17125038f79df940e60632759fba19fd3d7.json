{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'./api';import'./Profile.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(){const[user,setUser]=useState({});const[editing,setEditing]=useState(false);const[form,setForm]=useState({});const[message,setMessage]=useState('');const[error,setError]=useState('');useEffect(()=>{const fetchProfile=async()=>{try{const res=await api.get('/auth/user/');setUser(res.data);setForm({first_name:res.data.first_name||'',last_name:res.data.last_name||'',bio:res.data.bio||''});}catch(err){setError('Failed to fetch profile.');}};fetchProfile();},[]);const handleUpdate=async e=>{e.preventDefault();try{const payload={username:user.username,// ðŸ‘ˆ must include\nemail:user.email||'',// ðŸ‘ˆ must include\nfirst_name:form.first_name||'',last_name:form.last_name||'',bio:form.bio||''};const res=await api.put('/auth/user/',payload);setUser(res.data);setMessage('Profile updated!');setError('');setEditing(false);}catch(err){var _err$response,_err$response2,_err$response2$data;console.error(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'Failed to update profile.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.username]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),editing?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdate,children:[/*#__PURE__*/_jsx(\"input\",{value:form.first_name,onChange:e=>setForm({...form,first_name:e.target.value}),placeholder:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.last_name,onChange:e=>setForm({...form,last_name:e.target.value}),placeholder:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{value:form.bio,onChange:e=>setForm({...form,bio:e.target.value}),placeholder:\"Bio\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",user.first_name,\" \",user.last_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Bio:\"}),\" \",user.bio||'No bio provided.']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(true),children:\"Edit Profile\"})]})]})});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","api","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Profile","user","setUser","editing","setEditing","form","setForm","message","setMessage","error","setError","fetchProfile","res","get","data","first_name","last_name","bio","err","handleUpdate","e","preventDefault","payload","username","email","put","_err$response","_err$response2","_err$response2$data","console","response","detail","className","children","onSubmit","value","onChange","target","placeholder","type","onClick"],"sources":["C:/Users/jayde/Downloads/crode_project/crode-project/frontend/src/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from './api';\r\nimport './Profile.css';\r\n\r\nfunction Profile() {\r\n  const [user, setUser] = useState({});\r\n  const [editing, setEditing] = useState(false);\r\n  const [form, setForm] = useState({});\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const res = await api.get('/auth/user/');\r\n        setUser(res.data);\r\n        setForm({\r\n          first_name: res.data.first_name || '',\r\n          last_name: res.data.last_name || '',\r\n          bio: res.data.bio || '',\r\n        });\r\n      } catch (err) {\r\n        setError('Failed to fetch profile.');\r\n      }\r\n    };\r\n    fetchProfile();\r\n  }, []);\r\n\r\nconst handleUpdate = async (e) => {\r\n  e.preventDefault();\r\n  try {\r\n    const payload = {\r\n      username: user.username,       // ðŸ‘ˆ must include\r\n      email: user.email || '',       // ðŸ‘ˆ must include\r\n      first_name: form.first_name || '',\r\n      last_name: form.last_name || '',\r\n      bio: form.bio || '',\r\n    };\r\n\r\n    const res = await api.put('/auth/user/', payload);\r\n    setUser(res.data);\r\n    setMessage('Profile updated!');\r\n    setError('');\r\n    setEditing(false);\r\n  } catch (err) {\r\n    console.error(err.response?.data || err);\r\n    setError(\r\n      err.response?.data?.detail ||\r\n      'Failed to update profile.'\r\n    );\r\n  }\r\n};\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <div className=\"profile-card\">\r\n        <h2>Welcome, {user.username}</h2>\r\n        {message && <p className=\"message\">{message}</p>}\r\n        {error && <p className=\"error\">{error}</p>}\r\n\r\n        {editing ? (\r\n          <form onSubmit={handleUpdate}>\r\n            <input\r\n              value={form.first_name}\r\n              onChange={e => setForm({ ...form, first_name: e.target.value })}\r\n              placeholder=\"First Name\"\r\n            />\r\n            <input\r\n              value={form.last_name}\r\n              onChange={e => setForm({ ...form, last_name: e.target.value })}\r\n              placeholder=\"Last Name\"\r\n            />\r\n            <input\r\n              value={form.bio}\r\n              onChange={e => setForm({ ...form, bio: e.target.value })}\r\n              placeholder=\"Bio\"\r\n            />\r\n            <button type=\"submit\">Save</button>\r\n          </form>\r\n        ) : (\r\n          <>\r\n            <p><strong>Name:</strong> {user.first_name} {user.last_name}</p>\r\n            <p><strong>Bio:</strong> {user.bio || 'No bio provided.'}</p>\r\n            <button onClick={() => setEditing(true)}>Edit Profile</button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}